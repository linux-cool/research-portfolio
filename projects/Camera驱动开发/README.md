# Camera驱动开发学习路线

## 研究领域概述
本项目是从 FFmpeg 应用层到 Linux V4L2/Camera 内核驱动开发的系统性学习路线，涵盖多媒体处理全栈技术，从用户空间应用到内核驱动开发的完整知识体系。

## 学习路线图

```
┌─────────────────────────────────────────────────────────────────────────┐
│  阶段1: FFmpeg 应用层                                    [2-3周]        │
│  目标: 熟练使用 FFmpeg 命令行进行多媒体处理                              │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│  阶段2: FFmpeg 开发层                                    [3-4周]        │
│  目标: 使用 FFmpeg API 开发应用程序                                      │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│  阶段3: FFmpeg + V4L2 集成                               [2-3周]        │
│  目标: 理解 FFmpeg 如何通过 V4L2 采集视频                                │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│  阶段4: V4L2 用户空间编程                                [3-4周]        │
│  目标: 直接使用 V4L2 API 进行视频采集                                    │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│  阶段5: V4L2 内核框架                                    [4-6周]        │
│  目标: 理解 V4L2 内核子系统架构                                          │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│  阶段6: Camera 驱动开发                                  [6-8周]        │
│  目标: 能够开发/调试摄像头传感器驱动                                      │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│  阶段7: 综合项目实战                                     [4-6周]        │
│  目标: 完成端到端的摄像头项目                                            │
└─────────────────────────────────────────────────────────────────────────┘
```

## 技术栈覆盖

| 层次 | 技术要点 | 目标 |
|------|----------|------|
| 应用层 | FFmpeg CLI, GStreamer | 熟练使用多媒体工具 |
| 开发层 | libav*, 编解码API | 能写采集/编码程序 |
| 系统层 | V4L2 ioctl, mmap | 直接操作视频设备 |
| 内核层 | v4l2-core, videobuf2 | 理解内核框架 |
| 驱动层 | sensor driver, platform driver | 能开发驱动 |

## 时间规划

| 阶段 | 时长 | 产出 |
|------|------|------|
| 第一阶段 | 2-3周 | 熟练使用FFmpeg命令行 |
| 第二阶段 | 3-4周 | 能用API写采集/编码程序 |
| 第三阶段 | 2-3周 | 理解集成原理，能用硬件编码 |
| 第四阶段 | 3-4周 | 能直接用V4L2 API采集 |
| 第五阶段 | 4-6周 | 理解内核框架，能分析驱动 |
| 第六阶段 | 6-8周 | 能移植/开发传感器驱动 |
| 第七阶段 | 4-6周 | 完成端到端项目 |
| **总计** | **24-34周** | **约 6-8 个月** |

## 文件结构

```
Camera驱动开发/
├── README.md                           # 本文件 - 总体规划
├── 第一阶段_FFmpeg应用层/               # FFmpeg命令行使用
├── 第二阶段_FFmpeg开发层/               # FFmpeg API开发
├── 第三阶段_FFmpeg与V4L2集成/           # FFmpeg V4L2设备集成
├── 第四阶段_V4L2用户空间编程/           # V4L2用户态编程
├── 第五阶段_V4L2内核框架/               # V4L2内核源码分析
├── 第六阶段_Camera驱动开发/             # 传感器驱动开发
└── 第七阶段_综合项目实战/               # 端到端项目实践
```

## 硬件环境建议

```
入门阶段:
├── USB 摄像头 + x86 PC (任意Linux发行版)

进阶阶段:
├── 树莓派 4/5 + 官方摄像头模块
├── RK3568/RK3588 开发板 + MIPI 摄像头

专业阶段:
├── 全志/瑞芯微/海思 开发板
└── 配套 MIPI CSI-2 传感器模块
```

## 学习资源

### 官方文档
- FFmpeg: https://ffmpeg.org/documentation.html
- V4L2 用户空间: https://docs.kernel.org/userspace-api/media/v4l/v4l2.html
- V4L2 内核: https://docs.kernel.org/driver-api/media/v4l2-core.html

### 源码仓库
- FFmpeg: https://git.ffmpeg.org/ffmpeg.git
- Linux Kernel: https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git
- v4l-utils: https://git.linuxtv.org/v4l-utils.git

## 验证标准（DoD）
- 每个阶段完成对应的实践项目
- 能够独立解决该阶段的常见问题
- 产出可运行的示例代码
- 完成阶段性总结文档

## 联系方式
- 维护者：待定
- Issues：请在仓库 `Issues` 区提交

---
最后更新时间：2025-01
版本：v1.0.0

